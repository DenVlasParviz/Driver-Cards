(function(){"use strict";var t={3772:function(t,e,r){t.exports=r.p+"img/suncloud.2793227d.svg"},6218:function(t,e,r){t.exports=r.p+"img/sunny.15cdade3.svg"},6341:function(t,e,r){t.exports=r.p+"img/thunder.eaecaf7d.svg"},7877:function(t,e,r){t.exports=r.p+"img/cloudy.46681007.svg"},8382:function(t,e,r){var a=r(6848),n=r(6178),o=function(){var t=this,e=t._self._c;return e("b-container",[e("b-row",{staticClass:"justify-content-center"},[e("b-col",{attrs:{cols:"12",md:"6"}},[e("b-alert",{attrs:{variant:"success",fade:""},model:{value:t.showOkAlert,callback:function(e){t.showOkAlert=e},expression:"showOkAlert"}},[t._v("Дані збережені")]),e("h2",{staticClass:"text-center mb-4"},[t._v("Картка даних про водія")]),e("b-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"Номер авто","label-for":"carNumber"}},[e("b-form-input",{attrs:{id:"carNumber",required:""},model:{value:t.form.carNumber,callback:function(e){t.$set(t.form,"carNumber",t._n(e))},expression:"form.carNumber"}})],1),e("b-form-group",{attrs:{label:"Ім'я водія","label-for":"driver-Name"}},[e("b-form-input",{attrs:{id:"driver-Name",required:""},model:{value:t.form.driverName,callback:function(e){t.$set(t.form,"driverName",e)},expression:"form.driverName"}})],1),e("b-form-group",{attrs:{label:"Вага авто","label-for":"carWeight"}},[e("b-form-input",{attrs:{id:"carWeight",required:""},model:{value:t.form.carWeight,callback:function(e){t.$set(t.form,"carWeight",t._n(e))},expression:"form.carWeight"}})],1),e("b-form-checkbox",{attrs:{id:"Checkbox-1",name:"checkbox-1"},model:{value:t.stat,callback:function(e){t.stat=e},expression:"stat"}},[t._v(" Виїзд в ночі")]),e("b-col",{staticClass:"mt-3 text-center"},[e("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v(" Підтвердити ")])],1)],1)],1)],1)],1)},i=[],s=r(3518),l={data(){return{showOkAlert:!1,stat:!1,form:{carNumber:null,driverName:"",carWeight:null}}},methods:{...(0,s.i0)("vehicles",["addVehicle"]),async onSubmit(){const t={driver_number:this.form.carNumber,driver_name:this.form.driverName,car_weight:this.form.carWeight,isNight:this.stat};try{await this.addVehicle(t),this.showOkAlert=!0,setTimeout(()=>{this.showOkAlert=!1},1500),this.form.carNumber=null,this.form.driverName="",this.form.carWeight=null,this.stat=!1}catch(e){console.error("Помилка",e)}}}},c=l,u=r(1656),d=(0,u.A)(c,o,i,!1,null,"49ca18bf",null),m=d.exports,h=function(){var t=this,e=t._self._c;return e("b-container",[e("b-row",{staticClass:"justify-content-center"},[0===t.getVehicleInfo.length?e("h1",[t._v("Картки ще не створені")]):t._e(),t._l(t.getVehicleInfo,function(r){return e("b-card",{key:r.id,staticClass:"text-center mt-4 m-2",staticStyle:{width:"20rem"},attrs:{"border-variant":"primary","header-bg-variant":"primary","bg-variant":r.isNight?"dark":"white","text-variant":r.isNight?"white":"black","header-text-variant":"white",align:"center"}},[e("h5",[t._v("Ім'я водія: "+t._s(r.driver_name))]),e("h5",[t._v("Номер авто: "+t._s(r.driver_number))]),e("h5",[t._v("Вага авто: "+t._s(r.car_weight))]),e("h5",[t._v("температура : "+t._s(r.weather_temp)+" °C")]),e("p",[e("b-img",{staticClass:"weather-image",attrs:{src:t.mapIcon(r.weather_code)}})],1),e("b-button",{attrs:{variant:"danger"},on:{click:function(e){return e.preventDefault(),t.onSubmit(r.id)}}},[t._v(" Видалити картку")])],1)})],2)],1)},f=[];const p={0:r(6218),1:r(3772),2:r(3772),3:r(7877),61:r(9695),63:r(9695),65:r(9695),95:r(6341),96:r(6341)};function b(t){return p[t]}var v={data(){return{resultData:[]}},computed:{...(0,s.L8)("vehicles",["getVehicleInfo"])},methods:{mapIcon(t){return b(t)},...(0,s.i0)("vehicles",["removeVehicle"]),onSubmit(t){this.removeVehicle(t)}}},g=v,w=(0,u.A)(g,h,f,!1,null,"b65a06d2",null),y=w.exports,_=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("h1",[t._v("Контактна інформація")])},x=[],k={__name:"ContactView",setup(t){return{__sfc:!0}}},C=k,N=(0,u.A)(C,_,x,!1,null,"5ef26ca2",null),A=N.exports,O=function(){var t=this,e=t._self._c;return e("b-container",{staticClass:"mt-3"},[e("h5",{staticClass:"mt-3"},[t._v("Погода в "+t._s(t.cityName))]),e("b-button",{staticClass:"mt-3",attrs:{type:"submit",variant:"primary"},on:{click:t.onFetch}},[t._v(" Оновити дані ")]),t.current?e("div",[e("b-row",{staticClass:"mt-4 justify-content-center"},[e("b-img",{staticClass:"weather-image--preview",attrs:{src:t.mapIcon(t.current.weathercode)}}),e("h4",{staticClass:"mt-1 ml-2"},[t._v(t._s(t.current.temperature)+"°C")])],1),e("h4",[t._v("Прогноз на "+t._s(t.forecast.length)+" днів:")])],1):t._e(),t.current?e("b-table",{attrs:{hover:"",items:t.forecast,fields:t.fields},scopedSlots:t._u([{key:"cell(weathercode)",fn:function(r){return[e("b-img",{staticClass:"weather-image",attrs:{src:t.mapIcon(r.item.weathercode)}})]}}],null,!1,3981808304)}):t._e()],1)},S=[],j={data(){return{cityName:"Вінниця",fields:[{key:"date",label:"Дата"},{key:"tempMin",label:"Мін °C"},{key:"tempMax",label:"Макс °C"},{key:"weathercode",label:"Іконка"}]}},computed:{...(0,s.L8)("weather",{forecast:"getForecast",current:"getCurrentWeather"})},methods:{...(0,s.i0)("weather",["fetchWeatherByCity","loadLocalForecast"]),mapIcon(t){return b(t)},async onFetch(){await this.fetchWeatherByCity(this.cityName)}},mounted(){this.loadLocalForecast()}},V=j,I=(0,u.A)(V,O,S,!1,null,"1b3a3422",null),W=I.exports,P=function(){var t=this,e=t._self._c;return e("b-container",[e("b-row",{staticClass:"justify-content-center"},[e("b-col",{attrs:{cols:"12",md:"6"}},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.onRegister.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"Email","label-for":"email"}},[e("b-form-input",{attrs:{id:"email",type:"email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),e("b-form-group",{attrs:{label:"Password","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.loading}},[t._v(t._s(t.loading?"Registering":"sign up"))])],1)],1)],1)],1)},L=[],$=r(4373);const q=$.A.create({baseURL:{NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||"http://localhost:3000",headers:{"Content-Type":"application/json"}});function E({email:t,password:e}){return q.post("/auth/register",{email:t,password:e})}function R(t){t?q.defaults.headers.common["Authorization"]=`Bearer ${t}`:delete q.defaults.headers.common["Authorization"]}async function T({email:t,password:e}){const r=await q.post("/auth/login",{email:t,password:e}),a=r.data.token;return localStorage.setItem("token",a),R(a),r}var D=q,F={data(){return{email:"",password:"",error:"",loading:!1}},methods:{async onRegister(){this.loading=!0,this.error="";try{await E({email:this.email,password:this.password})}catch(t){this.error=t.response.data.message||"Ошибка"}finally{this.loading=!1}}}},z=F,M=(0,u.A)(z,P,L,!1,null,"d5863a54",null),B=M.exports,U=function(){var t=this,e=t._self._c;return e("b-container",[e("b-row",{staticClass:"justify-content-center"},[e("b-col",{attrs:{cols:"12",md:"6"}},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.onLogin.apply(null,arguments)}}},[e("b-form-group",{attrs:{label:"Email","label-for":"email"}},[e("b-form-input",{attrs:{id:"email",type:"email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),e("b-form-group",{attrs:{label:"Password","label-for":"password"}},[e("b-form-input",{attrs:{id:"password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.loading}},[t._v(t._s(t.loading?"входимо...":"login"))])],1)],1)],1)],1)},G=[],H=(r(4114),{data(){return{email:"",password:"",error:"",loading:!1}},methods:{async onLogin(){this.loading=!0,this.error="";try{await T({email:this.email,password:this.password}),this.$router.push("/home")}catch(t){this.error=t.response.data.message||"Ошибка"}finally{this.loading=!1}}}}),Y=H,J=(0,u.A)(Y,U,G,!1,null,"41bfa4bc",null),K=J.exports;a["default"].use(n.Ay);const Q=[{path:"/",component:m},{path:"/about",component:y},{path:"/contact",component:A},{path:"/weather",component:W},{path:"/signup",component:B},{path:"/login",component:K}];var X=new n.Ay({mode:"history",routes:Q}),Z=r(1641),tt=r(4486);r(9313),r(8111),r(1701);const et={products:[]},rt={initializeStore(t,e){t.products=e}},at={async loadVehicle({commit:t}){try{const e=await D.get("/api/info/card");t("initializeStore",e.data);const r=e.data,a=await Promise.all(r.map(async t=>{try{const e=await D.get(`/night/${t.id}`);return{...t,isNight:e.data.isNight}}catch(e){return console.warn(`Не удалось загрузить isNight для водителя ${t.id}`),{...t,isNight:!1}}}));t("initializeStore",a)}catch(e){console.log(e),e.response&&e.response.status}},async addVehicle({dispatch:t},e){try{const{isNight:r,...a}=e,n=await D.post("/api/info/card",a),o=n.data.id;"undefined"!==typeof r&&await D.post(`/night/${o}`,{isNight:r}),t("loadVehicle")}catch(r){console.error("Ошибка при добавлении водителя:",r)}},async removeVehicle({dispatch:t},e){await D.delete(`/api/info/card/${e}`),t("loadVehicle")}},nt={getVehicleInfo(t){return t.products}};var ot={namespaced:!0,state:et,mutations:rt,actions:at,getters:nt};a["default"].use(s.Ay);var it=new s.Ay.Store({modules:{vehicles:ot}}),st=function(){var t=this,e=t._self._c;return e("b-container",[e("b-navbar",{staticClass:"justify-content-center",attrs:{type:"light",variant:"light"}},[e("b-navbar-nav",[e("b-nav-item",{staticClass:"text-dark",attrs:{to:"/"}},[t._v("Home")]),e("b-nav-item",{staticClass:"text-dark",attrs:{to:"/about"}},[t._v("About")]),e("b-nav-item",{staticClass:"text-dark",attrs:{to:"/contact"}},[t._v("Contact")]),e("b-nav-item",{staticClass:"text-dark",attrs:{to:"/weather"}},[t._v("Weather")]),e("b-nav-item",{staticClass:"text-dark",attrs:{to:"/login"}},[t._v("Login")]),e("b-nav-item",{staticClass:"text-dark",attrs:{to:"/signup"}},[t._v("Register")])],1)],1),e("b-card",{staticClass:"mt-5 text-center"},[e("router-view")],1)],1)},lt=[],ct={},ut=ct,dt=(0,u.A)(ut,st,lt,!1,null,null,null),mt=dt.exports;const ht=localStorage.getItem("token");ht&&R(ht),a["default"].use(Z.vGs),a["default"].use(tt.YS),it.dispatch("vehicles/loadVehicle"),a["default"].config.productionTip=!1,new a["default"]({router:X,store:it,render:t=>t(mt)}).$mount("#app")},9695:function(t,e,r){t.exports=r.p+"img/rain.dd2d8e73.svg"}},e={};function r(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,r),o.exports}r.m=t,function(){var t=[];r.O=function(e,a,n,o){if(!a){var i=1/0;for(u=0;u<t.length;u++){a=t[u][0],n=t[u][1],o=t[u][2];for(var s=!0,l=0;l<a.length;l++)(!1&o||i>=o)&&Object.keys(r.O).every(function(t){return r.O[t](a[l])})?a.splice(l--,1):(s=!1,o<i&&(i=o));if(s){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[a,n,o]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.p="/"}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,o,i=a[0],s=a[1],l=a[2],c=0;if(i.some(function(e){return 0!==t[e]})){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(l)var u=l(r)}for(e&&e(a);c<i.length;c++)o=i[c],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(u)},a=self["webpackChunkvue2proj"]=self["webpackChunkvue2proj"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[504],function(){return r(8382)});a=r.O(a)})();
//# sourceMappingURL=app.62b52c9f.js.map