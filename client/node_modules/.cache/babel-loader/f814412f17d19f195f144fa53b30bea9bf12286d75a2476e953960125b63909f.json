{"ast":null,"code":"import api from '@/services/authentication'; // наш axios‑инстанс\n\nconst state = {\n  products: []\n};\nconst mutations = {\n  initializeStore(state, newData) {\n    state.products = newData;\n  }\n};\nconst actions = {\n  async updateDriverNightStatus(_, {\n    driverId,\n    isNight\n  }) {\n    try {\n      await api.post(`/night/${driverId}`, {\n        isNight\n      });\n    } catch (err) {\n      console.error(\"Ошибка при обновлении режима 'ночь/день':\", err);\n    }\n  },\n  async loadVehicle({\n    commit\n  }) {\n    try {\n      const response = await api.get(\"/api/info/card\");\n      commit(\"initializeStore\", response.data);\n    } catch (err) {\n      console.log(err);\n      if (err.response && err.response.status === 401) {\n        // this.$router.push('/login');\n      }\n    }\n  },\n  async addVehicle({\n    dispatch\n  }, payload) {\n    const {\n      isNight,\n      ...driverData\n    } = payload;\n    const response = await api.post(\"http://localhost:3000/api/info/card\", payload);\n    dispatch(\"loadVehicle\");\n  },\n  async removeVehicle({\n    dispatch\n  }, id) {\n    await api.delete(`http://localhost:3000/api/info/card/${id}`);\n    dispatch(\"loadVehicle\");\n  }\n};\nconst getters = {\n  getVehicleInfo(state) {\n    return state.products;\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters\n};","map":{"version":3,"names":["api","state","products","mutations","initializeStore","newData","actions","updateDriverNightStatus","_","driverId","isNight","post","err","console","error","loadVehicle","commit","response","get","data","log","status","addVehicle","dispatch","payload","driverData","removeVehicle","id","delete","getters","getVehicleInfo","namespaced"],"sources":["C:/Users/Денис/Desktop/Programming/Lesson11/client/src/store/modules/vehicles.js"],"sourcesContent":["import api from '@/services/authentication';  // наш axios‑инстанс\n\n\n\nconst state = {\n  products: [],\n};\n\nconst mutations = {\n  initializeStore(state, newData) {\n    state.products = newData;\n  },\n};\n\nconst actions = {\n\n  async updateDriverNightStatus(_, { driverId, isNight }) {\n    try {\n      await api.post(`/night/${driverId}`, { isNight });\n    } catch (err) {\n      console.error(\"Ошибка при обновлении режима 'ночь/день':\", err);\n    }\n  },\n\n\n  async loadVehicle({ commit }) {\n    try {\n\n\n      const response = await api.get(\"/api/info/card\");\n      commit(\"initializeStore\", response.data);\n    }\n    catch (err) {\n      console.log(err);\n      if (err.response && err.response.status === 401) {\n        // this.$router.push('/login');\n\n      }\n    }\n  },\n\n  async addVehicle({ dispatch }, payload) {\n    const { isNight, ...driverData } = payload;\n\n    const response = await api.post(\"http://localhost:3000/api/info/card\", payload);\n    \n    dispatch(\"loadVehicle\");\n  },\n\n  async removeVehicle({ dispatch }, id) {\n    await api.delete(`http://localhost:3000/api/info/card/${id}`);\n    dispatch(\"loadVehicle\");\n  },\n};\n\nconst getters = {\n  getVehicleInfo(state) {\n    return state.products;\n  },\n};\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions,\n  getters,\n};\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,2BAA2B,CAAC,CAAE;;AAI9C,MAAMC,KAAK,GAAG;EACZC,QAAQ,EAAE;AACZ,CAAC;AAED,MAAMC,SAAS,GAAG;EAChBC,eAAeA,CAACH,KAAK,EAAEI,OAAO,EAAE;IAC9BJ,KAAK,CAACC,QAAQ,GAAGG,OAAO;EAC1B;AACF,CAAC;AAED,MAAMC,OAAO,GAAG;EAEd,MAAMC,uBAAuBA,CAACC,CAAC,EAAE;IAAEC,QAAQ;IAAEC;EAAQ,CAAC,EAAE;IACtD,IAAI;MACF,MAAMV,GAAG,CAACW,IAAI,CAAC,UAAUF,QAAQ,EAAE,EAAE;QAAEC;MAAQ,CAAC,CAAC;IACnD,CAAC,CAAC,OAAOE,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,2CAA2C,EAAEF,GAAG,CAAC;IACjE;EACF,CAAC;EAGD,MAAMG,WAAWA,CAAC;IAAEC;EAAO,CAAC,EAAE;IAC5B,IAAI;MAGF,MAAMC,QAAQ,GAAG,MAAMjB,GAAG,CAACkB,GAAG,CAAC,gBAAgB,CAAC;MAChDF,MAAM,CAAC,iBAAiB,EAAEC,QAAQ,CAACE,IAAI,CAAC;IAC1C,CAAC,CACD,OAAOP,GAAG,EAAE;MACVC,OAAO,CAACO,GAAG,CAACR,GAAG,CAAC;MAChB,IAAIA,GAAG,CAACK,QAAQ,IAAIL,GAAG,CAACK,QAAQ,CAACI,MAAM,KAAK,GAAG,EAAE;QAC/C;MAAA;IAGJ;EACF,CAAC;EAED,MAAMC,UAAUA,CAAC;IAAEC;EAAS,CAAC,EAAEC,OAAO,EAAE;IACtC,MAAM;MAAEd,OAAO;MAAE,GAAGe;IAAW,CAAC,GAAGD,OAAO;IAE1C,MAAMP,QAAQ,GAAG,MAAMjB,GAAG,CAACW,IAAI,CAAC,qCAAqC,EAAEa,OAAO,CAAC;IAE/ED,QAAQ,CAAC,aAAa,CAAC;EACzB,CAAC;EAED,MAAMG,aAAaA,CAAC;IAAEH;EAAS,CAAC,EAAEI,EAAE,EAAE;IACpC,MAAM3B,GAAG,CAAC4B,MAAM,CAAC,uCAAuCD,EAAE,EAAE,CAAC;IAC7DJ,QAAQ,CAAC,aAAa,CAAC;EACzB;AACF,CAAC;AAED,MAAMM,OAAO,GAAG;EACdC,cAAcA,CAAC7B,KAAK,EAAE;IACpB,OAAOA,KAAK,CAACC,QAAQ;EACvB;AACF,CAAC;AAED,eAAe;EACb6B,UAAU,EAAE,IAAI;EAChB9B,KAAK;EACLE,SAAS;EACTG,OAAO;EACPuB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}